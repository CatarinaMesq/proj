<!DOCTYPE html>
<html lang="en">
<head>

    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="https://unpkg.com/@picocss/pico@1.*/css/pico.min.css"">
    <link rel="shortcut icon" href="https://picocss.com/favicon.ico">
    <link rel="canonical" href="https://picocss.com/examples/company/">
    <title>Sarcastic! â€¢</title>
</head>
<body>

<!-- Hero -->
    <div class="hero" data-theme="dark">
      <nav class="container-fluid">
        <ul>
          <li><a href="{{ url_for('index') }}" class="contrast" ><strong>Sarcastic!</strong></a></li>
        </ul>
        <ul>
            {% if session.username %}
          <li>
            <details role="list" dir="rtl">
              <summary aria-haspopup="listbox" role="link" class="contrast" href="{{ url_for('profile', username=session.username) }}">Welcome, {{ session.username }}</summary>
              <ul role="listbox">
                <li><a href="{{ url_for('logout') }}">Logout</a></li>

                {% else %}

                <li><a href="{{ url_for('login') }}">Login</a></li>
                <li><a href="{{ url_for('register') }}">Register</a></li>
                {% endif %}
              </ul>
            </details>
          </li>
          <li>
            <details role="list" dir="rtl">
              <summary aria-haspopup="listbox" role="link" class="contrast">Menu</summary>
              <ul role="listbox">
                <li><a href="{{ url_for('feed') }}">Feed</a></li>
                <li><a href="{{ url_for('search') }}">Search</a></li>
              </ul>
            </details>
          </li>
        </ul>
      </nav>
    </div><!-- ./ Hero -->

{% block content %}
<!-- Main -->
 <main class="container" id="main">
    <title>{{ user[1] }}'s Profile</title>
  </head>
  <body>
    <header >
      <h1>{{ user[1] }}'s Profile</h1>
        <p>Username: {{ user[1] }}</p>
        <p>Email: {{ user[2] }}</p>
        <p>Registration date: {{ user[4] }}</p>
    </header>
    <h2>Posts</h2>
    {% for post in posts %}
      <div class="card mb-3">
        <div class="card-body">
          <div class="post">
            <p class="username">Author: {{ post[1] }}</p>
            <p class="content">{{ post[3] }}</p>
            <p class="timestamp">{{ post[4] }}</p>
          </div>
          <hr>
          <div class="card-footer">
            <form action="{{ url_for('comment') }}" method="post">
              {{ form.hidden_tag() }}
              <input type="hidden" name="post_id" value="{{ post[0] }}">
              <input type="text" name="content" placeholder="Add a comment..." class="form-control">
              <button type="submit" class="btn btn-primary btn-sm mt-2">Comment</button>
            </form>
            <!-- Comments -->
            {% for comment in comments %}
              {% if comment[1] == post[0]%}
              <div class="card-body mt-3">
                <p class="comment">{{ comment[2] }} : {{ comment[3] }}</p>
                <form action="{{ url_for('upvote_comment') }}" method="post">
                  {{ form.hidden_tag() }}
                  <input type="hidden" name="comment_id" value="{{ comment[0] }}">
                  <button type="submit" class="btn btn-primary btn-sm">Upvote</button>
                </form>
                <span class="badge badge-secondary"> Upvotes: {{ comment[5] }} upvotes</span>
              </div>
              {% endif %}

            {% endfor %}
          </div>
        </div>
      </div>
    {% endfor %}
  </body>
     </main><!-- ./ Main -->
{% endblock %}
